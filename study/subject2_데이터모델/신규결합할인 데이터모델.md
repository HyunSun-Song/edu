[업무 시나리오3]
모바일, 인터넷, TV 에 대해서 결합하면 할인을 주는 모두의 결합 시스템을 운용하고 있다.
모바일, 인터넷, TV 는 비즈니스 상품 유형 아래와 같이 구분 관리 합니다. (모바일 901, 인터넷 902, TV는 903)
비즈니스 상품 조합에 & 결합 약정 기간에 따라 할인을 정액으로 주고 있습니다. ( 정액 결합 )
- 1년 * (모바일&인터넷) : 1만원 월 할인
- 2년 * (모바일&인터넷) : 2.1만원 월 할인
- 3년 * (모바일&인터넷) : 3.5만원 월 할인
- 3년 * (모바일&인터넷&TV) : 5만원 월 할인
결합 약정 기간이내에 해지시 할인 반환금이 발생 됩니다.
- 할인 반환금 : 할인 받은 금액 * 120%
2025년 10월 1일 결합에 가입된 상품 총 금액에 따라 할인을 출시하고자 합니다.
- 1년 * (상품 월정액 총합 10~15만원) : 2만원 월 할인
- 2년 * (상품 월정액 총합 10~15만원) : 3.1만원 월 할인
- 3년 * (상품 월정액 총합 10~15만원) : 4.5만원 월 할인
- 3년 * (상품 월정액 총합 15~20만원) : 6.5만원 월 할인

고객기본정보
#고객번호
고객식별번호
고객명

계약기본정보
#서비스계약번호
#비즈니스상품유형
고객번호

결합변동이력
#결합계약번호
#서비스계약번호
*결합약정기간

결합계약원부
#결합계약번호
#결합유형

결합 할인기본 정보
#결합유형
#비즈니스상품 구성
#약정기간
* 할인금액

상품 기본
#상품번호 
* 월정액

상품변동이력
#서비스계약번호
#상품번호

[문제 3]
모두의 결합 시스템에서 신규 결합 할인 런칭하고자 합니다.  업무시나리오3에서 1~4 기반에서 5를 충족하는 DB 모델링(ERD 및 테이블 정의)을 신규 또는 수정 설계 하세요.  
( 단, 시나리오에 없는 내용에 대해서는 응시자가 알아서 전제 조건 및 가정을 설정하고 기술하시면 됩니다.)  

모두의 결합 시스템에서 신규 결합 할인 런칭을 위한 DB 모델링을 설계하기 위해, 기존 데이터베이스 구조를 기반으로 결합 할인에 관한 새로운 정보를 관리할 수 있는 엔터티를 추가하고 관계를 설정해야 합니다.

### 전제 조건 및 가정

1. **결합 할인**은 서비스 계약의 총 월정액 합계에 따라 달라지며, 결합 유형에 따라 할인 금액이 정해집니다.
2. **결합 약정 기간**은 1년, 2년, 3년으로 구분되며, 약정 기간에 따라 할인 금액이 다릅니다.
3. **결합 계약 해지** 시에는 할인 반환금이 발생하며, 할인 받은 금액의 120%가 반환됩니다.
4. **할인 조건**은 결합 상품의 월정액 총합에 따라 달라집니다.

### 수정된 ERD 및 테이블 정의

#### 1. 신규 엔터티 추가

- **결합 할인 기본 정보 (BundlingDiscountBasicInfo)**
  - **속성**: 결합유형 (PK), 비즈니스상품구성, 약정기간 (PK), 할인금액
- **결합 계약 원부 (BundlingContractMaster)**
  - **속성**: 결합계약번호 (PK), 결합유형 (FK), 결합약정기간, 할인금액
- **상품 기본 (ProductBasicInfo)**
  - **속성**: 상품번호 (PK), 월정액

#### 2. 수정된 엔터티 및 관계

- **고객기본정보 (CustomerBasicInfo)**
  - **속성**: 고객번호 (PK), 고객식별번호, 고객명
- **계약기본정보 (ContractBaseInfo)**
  - **속성**: 서비스계약번호 (PK), 비즈니스상품유형 (FK), 고객번호 (FK)
- **결합변동이력 (BundlingChangeHistory)**
  - **속성**: 결합계약번호 (FK), 서비스계약번호 (FK), 결합약정기간
- **상품변동이력 (ProductChangeHistory)**
  - **속성**: 서비스계약번호 (FK), 상품번호 (FK)

#### 3. 수정된 관계

1. **계약기본정보와 결합변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 계약에 대해 여러 결합 변동 이력이 있을 수 있습니다.

2. **결합변동이력과 결합계약 원부**

   - **관계**: N:1
   - **설명**: 여러 결합 변동 이력이 하나의 결합 계약 원부와 연결될 수 있습니다.

3. **계약기본정보와 상품변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 계약에 대해 여러 상품 변동 이력이 있을 수 있습니다.

4. **상품변동이력과 상품 기본**

   - **관계**: N:1
   - **설명**: 여러 상품 변동 이력이 하나의 상품 기본 정보와 연결될 수 있습니다.

5. **결합계약 원부와 결합 할인 기본 정보**

   - **관계**: N:1
   - **설명**: 여러 결합 계약 원부가 하나의 결합 할인 기본 정보와 연결될 수 있습니다.

### 수정된 ERD 다이어그램

```
plaintext코드 복사고객기본정보
+----------------------+
| 고객번호             | PK
| 고객식별번호         |
| 고객명               |
+----------------------+

    | 1:N
    |
    V

계약기본정보
+----------------------+
| 서비스계약번호       | PK
| 비즈니스상품유형     | FK
| 고객번호             | FK
+----------------------+

    | 1:N
    |
    V

결합변동이력
+----------------------+
| 결합계약번호         | FK
| 서비스계약번호       | FK
| 결합약정기간         |
+----------------------+

    | N:1
    |
    V

결합계약 원부
+----------------------+
| 결합계약번호         | PK
| 결합유형             | FK
| 결합약정기간         |
| 할인금액             |
+----------------------+

    | N:1
    |
    V

결합 할인 기본 정보
+----------------------+
| 결합유형             | PK
| 비즈니스상품구성     |
| 약정기간             | PK
| 할인금액             |
+----------------------+

    | 1:N
    |
    V

상품변동이력
+----------------------+
| 서비스계약번호       | FK
| 상품번호             | FK
+----------------------+

    | N:1
    |
    V

상품 기본
+----------------------+
| 상품번호             | PK
| 월정액               |
+----------------------+
```

### 테이블 정의

1. **고객기본정보 (CustomerBasicInfo)**
   - **고객번호** (PK)
   - **고객식별번호**
   - **고객명**
2. **계약기본정보 (ContractBaseInfo)**
   - **서비스계약번호** (PK)
   - **비즈니스상품유형** (FK)
   - **고객번호** (FK)
3. **결합변동이력 (BundlingChangeHistory)**
   - **결합계약번호** (FK)
   - **서비스계약번호** (FK)
   - **결합약정기간**
4. **결합계약 원부 (BundlingContractMaster)**
   - **결합계약번호** (PK)
   - **결합유형** (FK)
   - **결합약정기간**
   - **할인금액**
5. **결합 할인 기본 정보 (BundlingDiscountBasicInfo)**
   - **결합유형** (PK)
   - **비즈니스상품구성**
   - **약정기간** (PK)
   - **할인금액**
6. **상품변동이력 (ProductChangeHistory)**
   - **서비스계약번호** (FK)
   - **상품번호** (FK)
7. **상품 기본 (ProductBasicInfo)**
   - **상품번호** (PK)
   - **월정액**

이 설계는 신규 결합 할인 런칭에 필요한 모든 정보를 관리하며, 고객의 결합 계약에 따라 정확한 할인 금액과 해지 시 반환금 등을 효율적으로 처리할 수 있도록 지원합니다.