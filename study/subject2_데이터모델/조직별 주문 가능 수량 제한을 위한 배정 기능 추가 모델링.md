[업무 요건]
kt는 제조사에 발주를 통해 기기를 물류센터에 확보하여 대리점에 공급한다. 
대리점은 K-RDS 시스템을 통해서 주문하여 판매할 기기를 확보한다. 
kt 물류 센터는 주문 내역을 확인하고 가용 수량 내에서 배송을 한다.

[업무 시나리오]
 - 대리점 기기 주문/배송
 대리점은 판매할 기기가 필요 시 주문/배송화면에서 주문을 통해 기기를 확보한다.
  주문 시에는 기기구분, 모델명, 수량 등을 선택하고 주문 등록한다.  
  주문은 물류센터 내 실재고 수량 한도 내에서 등록 가능하다.
  주문 등록 내역은 담당 마케팅 매니저의 승인을 통해서 주문 확정한다.
  확정된 주문 내역은 물류센터에서 확인하여 재고 확인 후 배송확정을 한다. 
  물류센터에서 배송 주소로 기기배송을 시작한다.
  배송은 여러 주문을 하나로 묶어서 배송이 가능하다.  
  주문 대리점에서는 배송 내역을 확인 후 인수 또는 인수거부를 할 수 있다.
  인수확인이 되면 주문 대리점 재고로 잡히고 판매가 가능하다.

문제2 . 주요 인기모델을 특정 대리점에서 선점하여 대리점 및 고객의 불만이 높아지고 있다. 조직별 주문가능 수량을 제한하는 배정기능을 추가하는 모델링을 하시요. 
배정은 본사배정, 본부배정, 대리점 배정이 있다. 
본사 배정은 kt 본사에서 각 본부, 본부배정은 본부에서 각 소속 마케팅부로, 대리점배정은 마케팅부에서 대리점에 배정 할 수 있다. 
대리점 주문 시 대리점은 각 마케팅부에 배정된 수량에 한해서 주문 등록 가능하다.  
기기종류 중에서 단말기는 배정 필수이며 그 외 유선 단말기 등은 필수가 아니다. 
일부 기기는 배정제외 모델로 등록하여 배정 없이 주문 할 수 있다. 
배정 조직간 상/하위 조직 관계를 설정 할 수 있어야 한다. 

필요한 전제와 가정을 제시하고 문제2을 해결해 주세요.

### 조직별 주문 가능 수량 제한을 위한 배정 기능 추가 모델링

#### 전제 및 가정

1. **배정의 범위**:
   - **본사 배정**: KT 본사에서 각 본부에 기기 수량을 배정.
   - **본부 배정**: 각 본부에서 소속 마케팅 부서로 기기 수량을 배정.
   - **대리점 배정**: 각 마케팅 부서에서 대리점으로 기기 수량을 배정.
2. **배정 대상**:
   - **필수 배정**: 단말기와 같은 인기 모델은 반드시 배정을 통해서만 주문 가능.
   - **배정 제외**: 유선 단말기 등 일부 기기는 배정 없이 주문 가능.
3. **배정제외 모델 등록**:
   - 특정 기기를 배정 제외 모델로 등록하여, 배정 없이 주문할 수 있다.
4. **조직 관계**:
   - 상/하위 조직 간의 배정 관계를 설정할 수 있어야 한다.
   - 예를 들어, 본사는 본부를, 본부는 소속 마케팅부를, 마케팅부는 대리점을 관리.

### 해결 방안

### 1. **데이터 모델링**

#### 1.1 조직 테이블 (Organization)

- `org_id` (조직 ID)
- `org_name` (조직명)
- `org_type` (조직 유형: 본사, 본부, 마케팅부, 대리점)
- `parent_org_id` (상위 조직 ID)

#### 1.2 기기 테이블 (Device)

- `device_id` (기기 ID)
- `device_type` (기기 구분: 단말기, 유선 단말기 등)
- `model_name` (모델명)
- `is_assignment_required` (배정 필수 여부: Yes/No)
- `is_assignment_excluded` (배정 제외 여부: Yes/No)

#### 1.3 배정 테이블 (Assignment)

- `assignment_id` (배정 ID)
- `device_id` (기기 ID)
- `org_id` (조직 ID, 배정받는 조직)
- `assigned_quantity` (배정된 수량)
- `remaining_quantity` (남은 수량)
- `assignment_date` (배정 날짜)
- `parent_assignment_id` (상위 배정 ID, 상위 조직으로부터 배정받은 경우)

#### 1.4 주문 테이블 (Order)

- `order_id` (주문 ID)
- `dealer_id` (대리점 ID)
- `device_id` (기기 ID)
- `quantity_ordered` (주문 수량)
- `org_id` (주문하는 조직 ID, 대리점)
- `order_status` (주문 상태: 등록, 승인, 배송확정)
- `order_date` (주문 날짜)

### 2. **배정 프로세스**

1. **본사 배정**:
   - KT 본사에서 각 본부에 인기 기기(단말기 등)의 배정 수량을 지정합니다.
   - 본사는 각 본부의 기기 수요와 재고 상황을 고려하여 배정합니다.
2. **본부 배정**:
   - 각 본부는 소속 마케팅부서에 배정된 기기 수량을 할당합니다.
   - 본부는 배정 수량을 관리하며, 소속 마케팅부에 적절하게 배정합니다.
3. **대리점 배정**:
   - 마케팅부는 각 대리점에 배정된 수량을 할당합니다.
   - 대리점은 배정된 수량에 따라 기기를 주문할 수 있으며, 배정 수량 내에서만 주문이 가능합니다.
4. **배정 검증**:
   - 대리점이 주문을 등록할 때, 해당 대리점에 배정된 기기의 잔여 수량을 검증합니다.
   - 배정 필수 기기(예: 단말기)의 경우, 배정 수량이 충분하지 않으면 주문이 불가능합니다.
   - 배정 제외 모델은 별도의 배정 없이 주문이 가능합니다.

### 3. **업무 시나리오 수정**

#### 3.1 대리점 기기 주문/배송 프로세스 수정

1. **주문 생성**:
   - 대리점은 판매할 기기 주문 시, **배정 필수 여부**와 **배정 수량**을 확인합니다.
   - 배정 필수 기기의 경우, 배정 수량 내에서만 주문이 가능합니다.
2. **배정 확인**:
   - 주문 등록 시, 시스템은 대리점의 배정 수량을 확인하고, 배정 수량이 부족할 경우 주문이 거부됩니다.
   - 배정 제외 모델의 경우, 별도의 배정 수량 확인 없이 주문이 가능합니다.
3. **주문 승인 및 확정**:
   - 주문이 등록되면 담당 마케팅 매니저가 배정 수량을 검토한 후 주문을 승인합니다.
   - 승인된 주문은 물류센터에서 재고 확인 후 배송을 확정합니다.
4. **재고 및 배송**:
   - 물류센터는 주문이 확정된 후 재고를 확인하고, 대리점으로 배송을 진행합니다.
   - 배송 완료 후, 대리점 재고로 해당 기기가 업데이트됩니다.

### 4. **시스템 아키텍처 수정**

- **배정 관리 모듈**: 본사, 본부, 마케팅부, 대리점 간의 기기 배정을 관리하며, 배정 필수 기기와 배정 제외 기기를 구분하여 처리합니다.
- **주문 관리 모듈**: 주문 시 배정 수량을 검토하고, 배정 수량 내에서만 주문을 승인합니다.
- **재고 관리 모듈**: 각 조직의 배정 수량과 재고를 실시간으로 추적합니다.

이와 같은 모델링을 통해 특정 대리점이 인기 모델을 선점하는 문제를 방지하고, 조직별로 공정하게 기기 수량을 배정하여 대리점 및 고객의 불만을 최소화할 수 있습니다.