[고객 상황]
우리는 41층 건물의 시스템을 제어 할 수 있는 통합 IBS 를 구축해야 한다. 각 층부는 소방시설, 출입제어, 온도제어, 습도, 조명, 전력 관리, 움직임 감지 센서등이 무선으로 설치 되어 있다.
각 센서는 근거리 무선 통신을 이용하여 중앙통제 시스템에 실시간으로 상황을 알려주고 있다. 중앙통제 시스템은 각 층부의 설정 값을 기반으로 모든 제어명령이 가능하다.
예를 들어, 총 8개의 엘리베이터에 대해, 특정 시간대에는 1층에서 15층까지만 운용이 자동 제어가 가능하다. 또한 19층은 야간 23시까지 냉방기가 동작하도록 제어하며,
우천시에는 건물 전체에 제습 및 환풍기가 작동하도록 제어 가능하다. 우리는 이러한 시스템을 구축하고, 추후에는 AI 기반 안내 로봇을 도입하고 
건물을 이용하는 모든 고객들에게 편의를 제공하고자 한다.

[업무 요건]
건물의 1층은 로비와 휴식장소 및 에스컬레이션 4기, 자동회전문 5기로 구성되어 있다.
건물의 41층은 각종 설비실로 일반인은 출입이 불가능하다.
2~40층은 사무실 10개와 휴식 장소로 4개, 화장실 4개로 구성되어 있다
각 사무실의 출입은 모두 지문인식으로 가능하며, 저녁 20시 이후에는 움직임 센서가 동작하여 보안을 강화하며, 00시부터는 출입제어가 불가능하다.
각 층의 냉난방 및 조명시설은 각 사무실의 리모컨으로 설정이 가능하며, 모바일을 통해서 제어도 가능하다.
우천시에는 건물의 모든 환풍시설 및 제습기가 작동하여 실내 습도를 60%로 낮춘다.
엘레베이터는 총 8기가 운행되나, 특정시간대 운행 가능한 층수를 설정할 수 있다.
모든 사무실은 임대로 운영하며, 시스템 사용은 임대료에 포함하고 있다.
단, 각 사무실 별 전력사용량이 임계치를 넘어설 경우 임대료에 추가 청구 할 수 있다.
또한 보안사항 위배로, 보안요원이 3회 이상 출동시, 1회당 일정 금액을 추가 청구 할 수 있다.

[업무 시나리오 1]
프로젝트 구축으로 인한 장기 상시 사용 요청
 우리는 약 3개월 간 15층의 한 개의 사무실을 임대하여 프로젝트를 진행하려고 한다.
 3개월 간, 상시 출입이 가능하며, 냉난방기가 동작해야 한다.
 프로젝트 수행을 위해 단기간 특수인력의 출입이 가능해야 한다.
 사무실 상시 사용으로, 계약된 전력 사용량의 임계치를 초과할 수 있다. 
   우리는 전기료에 20만원 상한선으로 계약했다.
 00시를 넘더라도 보안요원의 출동을 원하지 않는다.

문제 1
업무 시나리오 1에서 제시된 요건을 수용하기 위해서 통합 IBS에 예외적용을 해야 합니다.
시스템 내에서 예외적용을 위한 레퍼런스를 설계하고 이에 대한 값을 설정해 주세요.
그리고 관련 데이터 모델을 설계해 주세요.
(단, 시나리오에 기재되지 않은 사항에 가정과 전제는 응시자가 직접 설명합니다)

**업무 시나리오 1**에 맞춰 통합 IBS 시스템의 예외 적용을 위한 데이터 모델 설계를 진행합니다. 시나리오에서 요구하는 예외 사항을 수용하기 위해 필요한 데이터 모델을 설계합니다. 예외적용에는 사무실 임대, 전력 사용량 초과, 특수 인력 출입, 상시 출입 및 보안 요원 출동 제어가 포함됩니다.

### 데이터 모델 설계

1. **사무실 계약 엔터티 추가**

   - 사무실 계약 (OfficeContract)

     - 속성

       :

       - 계약ID (PK)
       - 사무실ID (FK)
       - 고객ID (FK)
       - 계약시작일
       - 계약종료일
       - 전력사용량상한선
       - 특수인력출입허용 (Boolean)
       - 상시출입허용 (Boolean)
       - 냉난방기동작 (Boolean)
       - 보안요원출동제어 (Boolean)
       - 전기료상한선 (기본값: 200,000원)

2. **전력 사용량 기록 엔터티 추가**

   - 전력 사용량 기록 (PowerUsageRecord)

     - 속성

       :

       - 기록ID (PK)
       - 계약ID (FK)
       - 기록일자
       - 사용량
       - 초과금액 (계약된 상한선 초과 시)

3. **출입 기록 엔터티 추가**

   - 출입 기록 (AccessRecord)

     - 속성

       :

       - 기록ID (PK)
       - 사무실ID (FK)
       - 사용자ID (FK)
       - 출입일자
       - 출입시간

4. **보안 요원 출동 기록 엔터티 추가**

   - 보안 요원 출동 기록 (SecurityGuardDispatchRecord)

     - 속성

       :

       - 출동ID (PK)
       - 사무실ID (FK)
       - 출동일자
       - 출동시간
       - 출동사유
       - 추가청구금액

5. **특수 인력 관리 엔터티 추가**

   - 특수 인력 관리 (SpecialPersonnelManagement)

     - 속성

       :

       - 인력ID (PK)
       - 사무실ID (FK)
       - 인력명
       - 출입시작일
       - 출입종료일

6. **기기 예외 설정 엔터티 추가**

   - 기기 예외 설정 (DeviceExceptionSetting)

     - 속성

       :

       - 예외ID (PK)
       - 기기ID (FK)
       - 예외설정유형
       - 설정값
       - 설정시작일
       - 설정종료일

### 관계 정의 및 예외 처리

- **사무실 계약 (OfficeContract)와 전력 사용량 기록 (PowerUsageRecord)**

  - 관계

    : 1

    

  - **설명**: 하나의 사무실 계약에 대해 여러 전력 사용량 기록이 있을 수 있습니다.

- **사무실 계약 (OfficeContract)와 출입 기록 (AccessRecord)**

  - 관계

    : 1

    

  - **설명**: 하나의 사무실 계약에 대해 여러 출입 기록이 있을 수 있습니다.

- **사무실 계약 (OfficeContract)와 보안 요원 출동 기록 (SecurityGuardDispatchRecord)**

  - 관계

    : 1

    

  - **설명**: 하나의 사무실 계약에 대해 여러 보안 요원 출동 기록이 있을 수 있습니다.

- **사무실 계약 (OfficeContract)와 특수 인력 관리 (SpecialPersonnelManagement)**

  - 관계

    : 1

    

  - **설명**: 하나의 사무실 계약에 대해 여러 특수 인력 관리 기록이 있을 수 있습니다.

- **기기 예외 설정 (DeviceExceptionSetting)와 기기 정보 (DeviceInfo)**

  - **관계**: N:1
  - **설명**: 여러 예외 설정이 하나의 기기에 적용될 수 있습니다.

### 예외 적용 및 값 설정

1. **상시 출입 허용**:
   - **사무실 계약**에서 `상시출입허용` 필드를 `TRUE`로 설정하여 3개월 동안 상시 출입을 허용합니다.
2. **냉난방기 동작**:
   - **사무실 계약**에서 `냉난방기동작` 필드를 `TRUE`로 설정하여 상시 냉난방기가 동작하도록 합니다.
3. **단기간 특수 인력 출입**:
   - **특수 인력 관리** 엔터티를 사용하여 단기간 특수 인력의 출입을 허용합니다.
4. **전력 사용량 초과**:
   - **전력 사용량 기록** 엔터티에서 전력 사용량을 기록하고, 계약된 전력 사용량의 상한선을 초과할 경우 추가 청구 금액을 계산하여 기록합니다.
5. **보안 요원 출동 제어**:
   - **사무실 계약**에서 `보안요원출동제어` 필드를 `TRUE`로 설정하여 00시 이후의 보안 요원 출동을 방지합니다.
6. **기기 예외 설정**:
   - **기기 예외 설정** 엔터티에서 특정 기기에 대해 예외 설정을 추가하여 예외적인 상황을 처리합니다.

### ERD 다이어그램

```
plaintext코드 복사사무실 계약 (OfficeContract)
+----------------------------+
| 계약ID                     | PK
| 사무실ID                   | FK
| 고객ID                     | FK
| 계약시작일                 |
| 계약종료일                 |
| 전력사용량상한선           |
| 특수인력출입허용           |
| 상시출입허용               |
| 냉난방기동작               |
| 보안요원출동제어           |
| 전기료상한선               |
+----------------------------+

    | 1:N
    |
    V

전력 사용량 기록 (PowerUsageRecord)
+----------------------------+
| 기록ID                     | PK
| 계약ID                     | FK
| 기록일자                   |
| 사용량                     |
| 초과금액                   |
+----------------------------+

    | 1:N
    |
    V

출입 기록 (AccessRecord)
+----------------------------+
| 기록ID                     | PK
| 사무실ID                   | FK
| 사용자ID                   | FK
| 출입일자                   |
| 출입시간                   |
+----------------------------+

    | 1:N
    |
    V

보안 요원 출동 기록 (SecurityGuardDispatchRecord)
+----------------------------+
| 출동ID                     | PK
| 사무실ID                   | FK
| 출동일자                   |
| 출동시간                   |
| 출동사유                   |
| 추가청구금액               |
+----------------------------+

    | 1:N
    |
    V

특수 인력 관리 (SpecialPersonnelManagement)
+----------------------------+
| 인력ID                     | PK
| 사무실ID                   | FK
| 인력명                     |
| 출입시작일                 |
| 출입종료일                 |
+----------------------------+

    | N:1
    |
    V

기기 예외 설정 (DeviceExceptionSetting)
+----------------------------+
| 예외ID                     | PK
| 기기ID                     | FK
| 예외설정유형               |
| 설정값                     |
| 설정시작일                 |
| 설정종료일                 |
+----------------------------+

    | N:1
    |
    V

기기 정보 (DeviceInfo)
+----------------------------+
| 기기ID                     | PK
| 기기유형                   |
| 기기위치                   |
| 모델명                     |
| 제어센서아이디             |
+----------------------------+
```

이 데이터 모델은 상시 출입, 냉난방기 동작, 전력 사용량 초과, 특수 인력 출입 관리, 보안 요원 출동 제어 등을 포함하여 통합 IBS 시스템의 예외 상황을 효과적으로 처리할 수 있습니다.