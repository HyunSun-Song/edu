카카오 게임즈에서 신작 출시를 위해 준비중이다. “거상 리턴즈” 신작 출시에 앞서 게임 포탈 고도화를 진행해야 하며, 해당 포탈 변경을 위한 설계를 진행한다. 
[업무 요건]
하기 기술된 요건의 수정은 불가하며, 추가 전제  및 가정이 필요한 경우 응시자가 추가한다.
기존 기능에 영향이 없어야 한다.
포탈에는 기존 게임이 이미 존재한다.
사용자는 게이머이며, 게임 접속, 게시판 확인, 결재의 목적으로 접속한다.
기존 게시판은 일반적인 자유게시판 형태의 게시판이며, 읽기, 쓰기, 수정, 삭제 의 기능이 있다.
신작 게임용 게시판을 별도로 구성하며, “거상 리턴즈” 게임 내에서 판매할 상품이나, 현물을 게시판에서 현금 또는 게임 머니로 사고 팔 수 있다.
게임 머니로 현물을 살수 있으며, 현금으로 현물 또는 게임 상품을 살 수 있다.
거래당 수수료는 0.05% 이다.
수수료는 기업의 자산으로 활용된다.

[업무 시나리오]
사용자는 게시판에서 게시글을 등록하여 구매 또는 판매의 글을 작성한다.
다른 사용자가 구매 및 판매 의사를 표명하고, 작성된 조건에 따라 거래를 진행한다.
구매하려는 사용자가 입금 또는 게임 머니를 충전하여 게시글에 매핑하여 지급해둔다.
지급 확인 후 현물 또는 게임 상품 판매자가 물건을 전달한다.
전달 완료 시 수수료를 제외한 현금 또는 게임 머니가 상대방에게 지급된다.
게임 머니 지급 시 실 게임 머니에서 차감 또는 지급된다.

[기존 ERD]
엔터티
사용자 : 사용자ID(PK), 사용자이름
게임재화: 게임ID(PK), 사용자ID(PK), 재화ID(PK), amount
게시글 : 게시글ID(PK), 작성자ID(FK), 제목, 내용
게임 : 게임ID(PK), 게임명
재화 : 재화ID(PK), 재화명

관계
사용자와 게시글은 1:0 또는 1:1 또는 1:N 관계
사용자와 게임재화는 1:0 또는 1:1 또는 1:N 관계
게임과 게임재화는 1:0 또는 1:1 또는 1:N 관계
재화와 게임재화는 1:0 또는 1:1 또는 1:N 관계

[문제]
“거상 리턴즈” 게임 출시를 위해 게시글 거래 기능이 구현될 수 있도록 프로세스를 설계하여 ERD 를 작성하시오

"거상 리턴즈" 신작 출시를 위해 게시글 거래 기능을 구현하는 ERD를 설계하려면, 게시글 거래를 관리하는데 필요한 추가 엔터티와 관계를 정의해야 합니다. 새로운 게시판 기능과 거래 프로세스를 효율적으로 관리하기 위해, 다음과 같은 수정 및 추가가 필요합니다.

### 1. 새로운 엔터티 추가

1. **상품 게시글**
   - **속성**: 게시글ID(PK), 작성자ID(FK), 제목, 내용, 게시글 유형 (판매/구매), 가격, 거래 상태 (등록, 거래중, 완료, 취소), 상품 유형 (현물/게임 상품), 거래 통화 (현금/게임 머니)
2. **거래**
   - **속성**: 거래ID(PK), 상품 게시글ID(FK), 구매자ID(FK), 판매자ID(FK), 거래금액, 거래수수료, 거래상태 (완료, 취소, 대기 중), 거래일자
3. **수수료**
   - **속성**: 수수료ID(PK), 거래ID(FK), 수수료금액
4. **게임 머니 충전**
   - **속성**: 충전ID(PK), 사용자ID(FK), 충전금액, 충전일자
5. **입금**
   - **속성**: 입금ID(PK), 사용자ID(FK), 입금금액, 입금일자

### 2. 수정된 엔터티

- **사용자**
  - **속성**: 사용자ID(PK), 사용자이름
- **게임재화**
  - **속성**: 게임ID(PK), 사용자ID(PK), 재화ID(PK), amount
- **게시글** (기존 엔터티와의 연결을 위해 수정)
  - **속성**: 게시글ID(PK), 작성자ID(FK), 제목, 내용, 게시글 유형 (자유게시판/거상 리턴즈), 게시글 상태 (활성화/비활성화)
- **게임**
  - **속성**: 게임ID(PK), 게임명
- **재화**
  - **속성**: 재화ID(PK), 재화명

### 3. 수정된 관계

1. **사용자와 상품 게시글**

   - 관계

     : 1

     

   - **설명**: 사용자는 여러 상품 게시글을 작성할 수 있음.

2. **상품 게시글과 거래**

   - 관계

     : 1

     

   - **설명**: 하나의 상품 게시글에는 여러 거래가 있을 수 있음.

3. **사용자와 거래**

   - 관계

     : 1

     

   - **설명**: 사용자(구매자 또는 판매자)는 여러 거래를 할 수 있음.

4. **거래와 수수료**

   - **관계**: 1:1
   - **설명**: 거래 하나에 대해 하나의 수수료가 발생함.

5. **사용자와 게임 머니 충전**

   - 관계

     : 1

     

   - **설명**: 사용자는 여러 번 게임 머니를 충전할 수 있음.

6. **사용자와 입금**

   - 관계

     : 1

     

   - **설명**: 사용자는 여러 번 입금을 할 수 있음.

### 4. 수정된 ERD 다이어그램

```
plaintext코드 복사사용자
+-----------+
| 사용자ID   | PK
| 사용자이름 |
+-----------+

    | 1:N
    |
    V

상품 게시글
+-----------+
| 게시글ID   | PK
| 작성자ID   | FK
| 제목       |
| 내용       |
| 게시글 유형|
| 가격       |
| 거래 상태  |
| 상품 유형  |
| 거래 통화  |
+-----------+

    | 1:N
    |
    V

거래
+-----------+
| 거래ID     | PK
| 상품 게시글ID | FK
| 구매자ID   | FK
| 판매자ID   | FK
| 거래금액   |
| 거래수수료 |
| 거래상태   |
| 거래일자   |
+-----------+

    | 1:1
    |
    V

수수료
+-----------+
| 수수료ID   | PK
| 거래ID     | FK
| 수수료금액 |
+-----------+

    | 1:N
    |
    V

게임재화
+-----------+
| 게임ID     | PK
| 사용자ID   | PK
| 재화ID     | PK
| amount     |
+-----------+

    | 1:N
    |
    V

재화
+-----------+
| 재화ID     | PK
| 재화명     |
+-----------+

    | 1:N
    |
    V

입금
+-----------+
| 입금ID     | PK
| 사용자ID   | FK
| 입금금액   |
| 입금일자   |
+-----------+

    | 1:N
    |
    V

게임 머니 충전
+-----------+
| 충전ID     | PK
| 사용자ID   | FK
| 충전금액   |
| 충전일자   |
+-----------+

    | 1:0..1
    |
    V

게시글 (기존)
+-----------+
| 게시글ID   | PK
| 작성자ID   | FK
| 제목       |
| 내용       |
| 게시글 유형|
| 게시글 상태|
+-----------+

    | 1:N
    |
    V

게임
+-----------+
| 게임ID     | PK
| 게임명     |
+-----------+
```

### 설명

- **상품 게시글**은 “거상 리턴즈”에서의 거래에 필요한 정보를 포함하고 있으며, 거래 상태와 게시글 유형을 통해 자유게시판과 구분됩니다.
- **거래** 엔터티는 거래의 세부 정보를 저장하며, **수수료**는 거래에 따른 수수료를 관리합니다.
- **게임 머니 충전**과 **입금** 엔터티는 각각 게임 머니와 현금을 관리하는 기능을 지원합니다.

이 ERD 설계는 "거상 리턴즈" 게임 출시를 위한 게시글 거래 시스템을 효과적으로 구현할 수 있도록 합니다.

