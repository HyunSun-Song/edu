[고객 상황]
구글은 구글 글라스2를 한국에 판매하기 위해 kt와 손을 잡았다. 구글 글라스2는 Gemini를 탑재하여 고객에게 다양한 경험 및 편의성을 주는 것으로
전 세계의 이목을 집중 시키고 있다. 구글 글라스2는 Gemini를 통해 사용자의 질의를 응답하고, 이미지에 대한 검색 및 실시간 번역이 가능하며, 사용자의 행동 패턴을 저장한다.
Kt는 모바일 요금제 가입고객을 대상으로, 월 9,900원(부가세포함)의 요금제로 판매 프로모션을 준비 중이다. 프로모션 기간내 가입고객에 한해 구글 글라스2 단말기를 무료로 제공한다.

[업무 요건]
Kt 요금제 사용 고객을 대상으로 구글 글라스2 상품을 판매하려고 한다.
구글 글라스2를 사용하기 위해서는 구글 계정이 반드시 필요하며, 인증 절차를 거쳐야 한다.
구글 글라스2에 가입시, 별도 회선번호가 생성되며, 요금제와 쉐어링 (OPMD)형태로 결합 된다.
기본 약정은 3년이며, 약정기간 내 단말 할인 (40%)만 적용한다. 요금제에 대한 할인은 적용하지 않는다.
만약 프로모션 기간내 고객의 경우, 단말기 구매 대금이 0원이다.
약정기간 내 해지시, 위약금은 kt 기준을 준용한다.
단, 구글 글라스2를 무료로 제공받은 고객의 해지 위약금은 단말금액 100% 이다.
구글 글라스2는 음/영상, 문자, 데이터서비스를 사용가능하고, 요금제와 결합되어 사용할 수 있다.
고객이 음/영상, 문자, 데이터를 사용할 경우, 요금제의 무료량에서 차감되며, 무료량 초과시 요금제의 요율로 과금 된다.
월 정액에 대한 청구는 고객의 요금제와 합산 청구 한다.
판매는 대리점, kt.com 온라인 채널을 이용한다.
구글 글라스2 상품은 모바일 요금제 사용 고객을 대상으로 가입 가능하며, IOS 사용자도 사용 가능하다.
가입고객에게는 월 정액 9,900 청구금액이 생성되며, 월 중 가입시 일할 된다.
프로모션 기간은 상품 출시 후 3개월이다.
구글 글라스2 단말기 배송은 기존 kt 시스템을 이용한다.
분실 및 파손에 따른 단말기 보증보험은 운용하지 않는다.
가입과 인증 절차는 기존 kt 요금제 가입절차를 준용한다.
구글에서는 구글 글라스2의 서비스 선호도를 조사하기 위해 사용량을 실시간으로 제공 받기 원한다.
구글 글라스2 사용자는 2025년 12월 31일까지 모든 컨텐츠에 대해 무료를 적용한다.

[업무 시나리오 1]
고객이 구글 글라스2를 이용하여 Gemini 서비스를 이용한다.
이 때, 사용되는 데이터는 과금 시스템을 사용량 테이블에 다음의 내용이 기록 된다.
회선번호 (OPMD), 시작시간, 종료시간, 접속 URL, 사용량 등.
과금 시스템은 무료 잔여량이 있을 경우 무료 처리되며, 무료량 초과 시 요금제의 요율로 초과과금 한다.
구글에서 지정한 URL일 경우, 사용량 정보를 JSON 형태로 생성하여 구글에 전송한다.
인터페이스 결과를 전송하고, 실패 시 재 전송을 수행한다.

[테이블]
고객정보 : 고객아이디, 청구아이디, 고객명, 연락처, ...
서비스계약 : 서비스계약아이디, 고객아이디, 상품아이디, 회선번호, ...
상품마스터 : 상품아이디, 상품명, ...
사용량 : 회선번호, ...
인터페이스기록 : 인터페이스아이디, 시작시간, 종료시간, 성공여부, ...

문제 1
구글은 구글 글라스2를 이용한 사용자 패턴을 분석하기 위해, Gemini 사용량을 실시간으로 연동 받고자 합니다.
단, 추후에 접속 URL을 기반으로 연동받고자 하는 사용량 정보는 늘어날 수 있다.
사용량 정보 연동을 위한 인터페이스 테이블과 대상 URL을 관리하기 위한 테이블을 설계해주세요.
인터페이스는 재전송 기능을 포함합니다.
(단, 시나리오에 기재되지 않은 사항에 가정과 전제는 응시자가 직접 설명합니다)

구글 글라스2의 Gemini 서비스 사용량 정보를 실시간으로 연동하기 위해서는 사용량 데이터를 기록하고, 이를 연동하기 위한 인터페이스와 URL 관리 테이블을 설계해야 합니다. 특히, 재전송 기능을 포함하여 실패 시 자동으로 재전송을 시도할 수 있는 구조를 갖추어야 합니다. 아래는 이러한 요구 사항을 충족하기 위한 데이터 모델 설계입니다.

### 1. 사용량 정보 테이블 (Usage)

이 테이블은 구글 글라스2를 통해 수집된 사용량 정보를 기록합니다.

- 사용량 (Usage)
  - **회선번호 (OPMD)**: VARCHAR, PK
  - **시작시간**: DATETIME
  - **종료시간**: DATETIME
  - **접속 URL**: VARCHAR
  - **사용량**: FLOAT
  - **무료량 초과 여부**: BOOLEAN (무료량 초과 시 `TRUE`, 아니면 `FALSE`)

### 2. 인터페이스 기록 테이블 (InterfaceLog)

이 테이블은 구글과의 데이터 연동을 관리하며, 성공 여부와 재전송 기능을 포함합니다.

- 인터페이스 기록 (InterfaceLog)
  - **인터페이스ID**: INT, PK, Auto Increment
  - **시작시간**: DATETIME
  - **종료시간**: DATETIME
  - **성공여부**: BOOLEAN (전송 성공 시 `TRUE`, 실패 시 `FALSE`)
  - **재전송 시도 횟수**: INT (재전송 시도 횟수 기록)
  - **최종재전송시간**: DATETIME (최후 재전송 시각)
  - **전송상세정보**: TEXT (전송 중 발생한 오류 메시지 또는 로그)
  - **사용량ID**: VARCHAR, FK (연관된 사용량 정보의 ID)

### 3. URL 관리 테이블 (URLManagement)

이 테이블은 연동 대상 URL을 관리합니다. 추후 URL이 추가되거나 변경될 수 있습니다.

- URL 관리 (URLManagement)
  - **URLID**: INT, PK, Auto Increment
  - **URL주소**: VARCHAR (연동 대상 URL)
  - **상태**: ENUM ('활성', '비활성') (URL의 활성화 여부)
  - **설명**: VARCHAR (URL에 대한 추가 설명)

### 4. 사용량 정보 연동 테이블 (UsageSync)

이 테이블은 구글과의 실시간 연동을 위한 준비 및 상태 정보를 관리합니다.

- 사용량 연동 (UsageSync)
  - **연동ID**: INT, PK, Auto Increment
  - **회선번호 (OPMD)**: VARCHAR, FK
  - **인터페이스ID**: INT, FK
  - **연동상태**: ENUM ('대기', '진행중', '완료', '실패')
  - **전송시도횟수**: INT (전송 시도 횟수)
  - **최종연동시간**: DATETIME (최후 연동 시각)
  - **연동오류정보**: TEXT (연동 시 발생한 오류 정보)

### 데이터 모델 설명

- **사용량 테이블 (Usage)**:
  - 구글 글라스2에서 발생한 사용량 정보를 기록합니다. 무료량 초과 여부를 기록하여 요금 계산 시 활용합니다.
- **인터페이스 기록 테이블 (InterfaceLog)**:
  - 구글과의 연동 결과를 기록합니다. 실패 시 재전송을 시도하며, 재전송 시도 횟수와 오류 정보를 기록합니다.
- **URL 관리 테이블 (URLManagement)**:
  - 구글 글라스2 서비스와 연동할 URL을 관리합니다. 새 URL 추가 및 기존 URL 관리가 용이합니다.
- **사용량 정보 연동 테이블 (UsageSync)**:
  - 사용량 정보를 구글에 전송하기 위해 준비 및 상태를 관리합니다. 전송 시도 횟수와 오류 정보를 기록하여 재전송 기능을 지원합니다.

### 예시 ERD 다이어그램

```
plaintext코드 복사사용량 (Usage)
+--------------------------+
| 회선번호 (PK)            |
| 시작시간                 |
| 종료시간                 |
| 접속 URL                 |
| 사용량                   |
| 무료량 초과 여부         |
+--------------------------+

    | 1:N
    |
    V

인터페이스 기록 (InterfaceLog)
+--------------------------+
| 인터페이스ID (PK)        |
| 시작시간                 |
| 종료시간                 |
| 성공여부                 |
| 재전송 시도 횟수          |
| 최종재전송시간           |
| 전송상세정보             |
| 사용량ID (FK)            |
+--------------------------+

    | N:1
    |
    V

URL 관리 (URLManagement)
+--------------------------+
| URLID (PK)               |
| URL주소                  |
| 상태                    |
| 설명                    |
+--------------------------+

    | 1:N
    |
    V

사용량 연동 (UsageSync)
+--------------------------+
| 연동ID (PK)              |
| 회선번호 (FK)            |
| 인터페이스ID (FK)        |
| 연동상태                |
| 전송시도횟수            |
| 최종연동시간            |
| 연동오류정보            |
+--------------------------+
```

### 설명

- **사용량** 테이블은 사용량 정보를 기록하여 무료량 초과 여부를 포함합니다.
- **인터페이스 기록** 테이블은 구글과의 데이터 연동 상태를 기록하고 실패 시 재전송 시도와 관련된 정보를 저장합니다.
- **URL 관리** 테이블은 연동 대상 URL을 관리하여 추후 URL 추가 및 변경을 용이하게 합니다.
- **사용량 연동** 테이블은 실시간 연동 상태를 관리하고 전송 시도 및 오류 정보를 기록하여 시스템의 안정성을 높입니다.

이 데이터 모델을 통해 구글 글라스2의 Gemini 서비스 사용량 정보를 효과적으로 관리하고, 실시간으로 구글에 연동할 수 있습니다.