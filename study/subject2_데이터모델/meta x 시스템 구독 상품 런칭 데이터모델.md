[업무 시나리오1]
AR, VR 기기를 포함한 장비/액세서리 판매/구독 와 게임, 아이템, 강의 등 메타버스 서비스 구독에 대해서 구독형으로 영업을 지원하는 Meata-X 시스템을 운용하고 있다.
모든 장비/액세서리, 메타버스 서비스는 매출원가가 존재(0원짜리 매출 없음)하고,무료 제공 시 할인을 주는 방식으로 운용하고 있다.
2024년 10월 1일 XR 장비 1종을 신규  출시하려고 한다.
XR 장비에 대해서 1년, 2년, 3년 약정으로 구독 가입 가능합니다.
2024년 10월1일 ~ 10월 30일 사이 구독 고객에게는 다음과 같이 혜택 주려고 한다.
- 3년 구독 혜택 : XR 레이싱 게임 무료(~2026년 12월까지), 모든 강의 무료(~2025년 12월까지), 액세서리 - 충전기 무료, 프미리엄 XR 보관함 무료
- 2년 구독 혜택 : XR 레이싱 게임 무료(~2026년 12월까지), 액세서리 - 충전기 무료, 프미리엄 XR 보관함 무료
- 1년 구독 혜택 : XR 레이싱 게임 무료(~2026년 12월까지), 액세서리 - 프미리엄 XR 보관함 무료
약정 기간 이 전에 해지 시 위약금이 부과 됩니다.
- ( 전체 구독 월정액 합계 * 사용 기간/전체약정기간 * 100% ) + (전체 구독 월정액 합계 * 잔여기간/ 전체약정기간 *150% )

[엔터티 정보]

고객기본정보
#고객번호
고객식별번호
고객명

계약기본정보
#서비스계약번호
고객번호

장비/액세서리변동이력
#서비스계약번호
#기기일련번호
#기기유형

기기 원부
#일련번호
#기기유형
*출고가
*판매가

서비스 상품 기본
#서비스유형 
* 월정액

서비스변동이력
#서비스계약번호
#서비스유형

장비/액세서리 상품 기본
#기기유형 ( AR/ VR )
* 월정액

[문제 1]
Meata-X 시스템에서 XR 장비를 신규 런칭하고자 합니다.  업무시나리오1에서 1~2기반으로 3~6를 충족하는 DB 모델링(ERD 및 테이블 정의)을 신규 또는 수정 설계 하세요.  
( 단, 시나리오에 없는 내용에 대해서는 응시자가 알아서 전제 조건 및 가정을 설정하고 기술하시면 됩니다.)  

XR 장비의 신규 런칭을 위해 Meata-X 시스템의 DB 모델링을 수정하고 확장하여, 장비의 구독, 해지, 혜택 및 위약금 계산을 처리할 수 있도록 설계합니다. 주요 요구 사항은 신규 장비의 구독 기간에 따라 제공되는 혜택과 위약금 계산을 지원하는 것입니다.

### 전제 조건 및 가정

1. **구독 유형**: XR 장비에 대해 1년, 2년, 3년 구독 약정이 가능하며, 각각의 약정에 따라 제공되는 혜택이 다릅니다.
2. **해지 시 위약금**: 위약금 계산은 구독 월정액 합계와 사용 기간을 기준으로 합니다.
3. **혜택 관리**: 각 구독 기간에 따른 혜택을 시스템에서 관리하고, 이를 구독 시점에 적용합니다.
4. **기기 원부**: 기기 원부에는 출고가와 판매가가 포함되어 있으며, 기기와 액세서리 정보를 포함합니다.

### 수정된 ERD 및 테이블 정의

#### 1. 새로운 엔터티

- **구독혜택 (SubscriptionBenefits)**
  - **속성**: 혜택ID (PK), 구독기간 (1년/2년/3년), 혜택내용
- **위약금계산 (PenaltyCalculation)**
  - **속성**: 위약금계산ID (PK), 서비스계약번호 (FK), 총월정액, 사용기간, 잔여기간, 위약금

#### 2. 수정된 엔터티 및 관계

- **계약기본정보 (ContractBaseInfo)**
  - **속성**: 서비스계약번호 (PK), 고객번호 (FK), 시작일자, 종료일자, 약정기간 (1년/2년/3년), 월정액
  - **설명**: 고객과의 계약 기본 정보를 관리합니다.
- **장비/액세서리변동이력 (DeviceAccessoryChangeHistory)**
  - **속성**: 서비스계약번호 (FK), 기기일련번호 (FK), 기기유형 (FK)
  - **설명**: 장비 및 액세서리의 변동 이력을 기록합니다.
- **기기 원부 (DeviceMaster)**
  - **속성**: 일련번호 (PK), 기기유형, 출고가, 판매가
  - **설명**: 기기와 액세서리의 기본 정보를 관리합니다.
- **서비스 상품 기본 (ServiceProductBasic)**
  - **속성**: 서비스유형 (PK), 월정액
  - **설명**: 서비스 상품의 기본 정보를 관리합니다.
- **서비스변동이력 (ServiceChangeHistory)**
  - **속성**: 서비스계약번호 (FK), 서비스유형 (FK)
  - **설명**: 서비스의 변동 이력을 기록합니다.
- **장비/액세서리 상품 기본 (DeviceAccessoryProductBasic)**
  - **속성**: 기기유형 (PK), 월정액
  - **설명**: 장비 및 액세서리의 기본 정보를 관리합니다.
- **혜택 (Benefits)**
  - **속성**: 혜택ID (PK), 서비스계약번호 (FK), 혜택내용, 만료일자
  - **설명**: 구독에 따른 혜택을 기록하고 관리합니다.

#### 3. 수정된 관계

1. **계약기본정보와 고객기본정보**

   - **관계**: N:1
   - **설명**: 여러 개의 계약이 하나의 고객에게 연결됩니다.

2. **계약기본정보와 장비/액세서리변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 계약에 대해 여러 장비와 액세서리가 연결될 수 있습니다.

3. **기기 원부와 장비/액세서리변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 기기 원부가 여러 장비/액세서리 변동 이력에 연결됩니다.

4. **서비스 상품 기본과 서비스변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 서비스 상품이 여러 서비스 변동 이력에 연결됩니다.

5. **장비/액세서리 상품 기본과 장비/액세서리변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 장비/액세서리 상품이 여러 장비/액세서리 변동 이력에 연결됩니다.

6. **계약기본정보와 구독혜택**

   - 관계

     : 1

     

   - **설명**: 하나의 계약이 여러 구독 혜택에 연결될 수 있습니다.

7. **계약기본정보와 위약금계산**

   - 관계

     : 1

     

   - **설명**: 하나의 계약이 여러 위약금 계산에 연결될 수 있습니다.

### 수정된 ERD 다이어그램

```
plaintext코드 복사고객기본정보
+----------------------+
| 고객번호             | PK
| 고객식별번호         |
| 고객명               |
+----------------------+

    | 1:N
    |
    V

계약기본정보
+----------------------+
| 서비스계약번호       | PK
| 고객번호             | FK
| 시작일자             |
| 종료일자             |
| 약정기간             | (1년/2년/3년)
| 월정액               |
+----------------------+

    | 1:N
    |
    V

장비/액세서리변동이력
+----------------------+
| 서비스계약번호       | FK
| 기기일련번호         | FK
| 기기유형             | FK
+----------------------+

    | N:1
    |
    V

기기 원부
+----------------------+
| 일련번호             | PK
| 기기유형             |
| 출고가               |
| 판매가               |
+----------------------+

    | N:1
    |
    V

서비스 상품 기본
+----------------------+
| 서비스유형           | PK
| 월정액               |
+----------------------+

    | 1:N
    |
    V

서비스변동이력
+----------------------+
| 서비스계약번호       | FK
| 서비스유형           | FK
+----------------------+

    | 1:N
    |
    V

장비/액세서리 상품 기본
+----------------------+
| 기기유형             | PK
| 월정액               |
+----------------------+

    | 1:N
    |
    V

구독혜택
+----------------------+
| 혜택ID               | PK
| 서비스계약번호       | FK
| 혜택내용             |
| 만료일자             |
+----------------------+

    | 1:N
    |
    V

위약금계산
+----------------------+
| 위약금계산ID         | PK
| 서비스계약번호       | FK
| 총월정액             |
| 사용기간             |
| 잔여기간             |
| 위약금               |
+----------------------+
```

### 테이블 정의

1. **고객기본정보 (CustomerBasicInfo)**
   - **고객번호** (PK)
   - **고객식별번호**
   - **고객명**
2. **계약기본정보 (ContractBaseInfo)**
   - **서비스계약번호** (PK)
   - **고객번호** (FK)
   - **시작일자**
   - **종료일자**
   - **약정기간** (1년/2년/3년)
   - **월정액**
3. **장비/액세서리변동이력 (DeviceAccessoryChangeHistory)**
   - **서비스계약번호** (FK)
   - **기기일련번호** (FK)
   - **기기유형** (FK)
4. **기기 원부 (DeviceMaster)**
   - **일련번호** (PK)
   - **기기유형**
   - **출고가**
   - **판매가**
5. **서비스 상품 기본 (ServiceProductBasic)**
   - **서비스유형** (PK)
   - **월정액**
6. **서비스변동이력 (ServiceChangeHistory)**
   - **서비스계약번호** (FK)
   - **서비스유형** (FK)
7. **장비/액세서리 상품 기본 (DeviceAccessoryProductBasic)**
   - **기기유형** (PK)
   - **월정액**
8. **구독혜택 (SubscriptionBenefits)**
   - **혜택ID** (PK)
   - **서비스계약번호** (FK)
   - **혜택내용**
   - **만료일자**
9. **위약금계산 (PenaltyCalculation)**
   - **위약금계산ID** (PK)
   - **서비스계약번호** (FK)
   - **총월정액**
   - **사용기간**
   - **잔여기간**
   - **위약금**

이 설계는 XR 장비의 신규 런칭을 지원하며, 구독 약정, 혜택 관리, 위약금 계산 및 해지 처리와 관련된 모든 요구 사항을 충족할 수 있도록 구성되었습니다