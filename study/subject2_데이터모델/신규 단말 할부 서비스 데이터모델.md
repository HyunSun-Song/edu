[업무 시나리오2]
모바일 요금제 및 부가서비스를 구독형으로 BSS 시스템을 운용하고 있다.
단말기는 BSS 시스템에서 전액 즉시납부, 전액 할부, 부분 즉시납부+부분할부 할 수 있게 기능을 추가 하고자 합니다.
단말기 출고가, 판매가 원부를 관리 될 예정입니다.
서비스계약번호에 할부 원부를 관리 될 예정입니다.
할부는 1년, 2년, 3년 으로 가입 가능 합니다.
할부 기간에 따라 할부 수수료는 차등 적용하고자 합니다.
- 3년 할부 수수료 : 할부 금액의 5%
- 2년 할부 수수료 : 할부 금액의 6%
- 1년 할부 수수료 : 할부 금액의 7%
할부 기간 이 전에 해지 시 잔여 할부금은 전액 즉시납부 해야 합니다

[엔터티 정보]

고객기본정보
#고객번호
고객식별번호
고객명

계약기본정보
#서비스계약번호
고객번호

기기변동이력
#서비스계약번호
#기기일련번호
#기기유형

기기 원부
#일련번호
#기기유형

서비스변동이력
#서비스계약번호
#서비스유형


서비스 상품 기본
#서비스유형 
#상품 유형(요금제/부가서비스)
* 월정액

[문제 2]
BSS 시스템에서 단말기에 대해서 신규 할부 서비스를 런칭하려고 합니다.  업무시나리오1에서 1를 기반으로 2~7를 충족하는 DB 모델링(ERD 및 테이블 정의)을 신규 또는 수정 설계 하세요.  
( 단, 시나리오에 없는 내용에 대해서는 응시자가 알아서 전제 조건 및 가정을 설정하고 기술하시면 됩니다.)  

단말기 할부 서비스를 BSS 시스템에 추가하기 위해, 기존 ERD를 수정하거나 새로운 엔터티를 추가하여 할부 관리, 수수료 계산 및 해지 처리 기능을 지원하는 DB 모델링을 설계합니다. 아래는 이 요구 사항을 충족하기 위한 DB 모델링과 테이블 정의입니다.

### 전제 조건 및 가정

1. **할부 옵션**: 단말기는 전액 즉시납부, 전액 할부, 부분 즉시납부+부분 할부 방식으로 구매할 수 있습니다.
2. **할부 기간**: 1년, 2년, 3년의 옵션이 있으며, 각 기간에 따라 다른 할부 수수료가 적용됩니다.
3. **해지 시 위약금**: 할부 계약 해지 시, 잔여 할부금은 전액 즉시납부가 필요합니다.
4. **수수료 관리**: 할부 수수료는 계약의 총 할부 금액에 기반하여 자동 계산됩니다.

### 수정된 ERD 및 테이블 정의

#### 1. 신규 엔터티 추가

- **할부 원부 (InstallmentMaster)**
  - **속성**: 할부ID (PK), 할부기간, 수수료율
- **단말기 할부 (DeviceInstallment)**
  - **속성**: 할부ID (PK), 서비스계약번호 (FK), 기기일련번호 (FK), 할부금액, 납부방식, 잔여금액, 해지여부
- **해지 내역 (TerminationDetails)**
  - **속성**: 해지ID (PK), 서비스계약번호 (FK), 해지일자, 잔여금액, 위약금

#### 2. 수정된 엔터티 및 관계

- **계약기본정보 (ContractBaseInfo)**
  - **속성**: 서비스계약번호 (PK), 고객번호 (FK), 시작일자, 종료일자
  - **설명**: 고객과의 계약 기본 정보를 관리합니다.
- **기기변동이력 (DeviceChangeHistory)**
  - **속성**: 서비스계약번호 (FK), 기기일련번호 (FK), 기기유형 (FK)
  - **설명**: 장비의 변동 이력을 기록합니다.
- **기기 원부 (DeviceMaster)**
  - **속성**: 일련번호 (PK), 기기유형, 출고가, 판매가
  - **설명**: 장비와 액세서리의 기본 정보를 관리합니다.
- **서비스변동이력 (ServiceChangeHistory)**
  - **속성**: 서비스계약번호 (FK), 서비스유형 (FK)
  - **설명**: 서비스의 변동 이력을 기록합니다.
- **서비스 상품 기본 (ServiceProductBasic)**
  - **속성**: 서비스유형 (PK), 상품 유형 (요금제/부가서비스), 월정액
  - **설명**: 서비스 상품의 기본 정보를 관리합니다.

#### 3. 수정된 관계

1. **계약기본정보와 기기변동이력**

   - 관계

     : 1

     

   - **설명**: 하나의 계약에 대해 여러 장비가 연결될 수 있습니다.

2. **계약기본정보와 단말기 할부**

   - 관계

     : 1

     

   - **설명**: 하나의 계약이 여러 할부 기록에 연결될 수 있습니다.

3. **단말기 할부와 기기 원부**

   - **관계**: N:1
   - **설명**: 여러 할부 기록이 하나의 기기 원부와 연결될 수 있습니다.

4. **단말기 할부와 할부 원부**

   - **관계**: N:1
   - **설명**: 여러 할부 기록이 하나의 할부 원부와 연결될 수 있습니다.

5. **계약기본정보와 해지 내역**

   - 관계

     : 1

     

   - **설명**: 하나의 계약이 여러 해지 내역에 연결될 수 있습니다.

### 수정된 ERD 다이어그램

```
plaintext코드 복사고객기본정보
+----------------------+
| 고객번호             | PK
| 고객식별번호         |
| 고객명               |
+----------------------+

    | 1:N
    |
    V

계약기본정보
+----------------------+
| 서비스계약번호       | PK
| 고객번호             | FK
| 시작일자             |
| 종료일자             |
+----------------------+

    | 1:N
    |
    V

기기변동이력
+----------------------+
| 서비스계약번호       | FK
| 기기일련번호         | FK
| 기기유형             | FK
+----------------------+

    | N:1
    |
    V

기기 원부
+----------------------+
| 일련번호             | PK
| 기기유형             |
| 출고가               |
| 판매가               |
+----------------------+

    | N:1
    |
    V

서비스변동이력
+----------------------+
| 서비스계약번호       | FK
| 서비스유형           | FK
+----------------------+

    | 1:N
    |
    V

서비스 상품 기본
+----------------------+
| 서비스유형           | PK
| 상품 유형 (요금제/부가서비스) |
| 월정액               |
+----------------------+

    | 1:N
    |
    V

단말기 할부
+----------------------+
| 할부ID               | PK
| 서비스계약번호       | FK
| 기기일련번호         | FK
| 할부금액             |
| 납부방식             |
| 잔여금액             |
| 해지여부             |
+----------------------+

    | 1:N
    |
    V

해지 내역
+----------------------+
| 해지ID               | PK
| 서비스계약번호       | FK
| 해지일자             |
| 잔여금액             |
| 위약금               |
+----------------------+

    | N:1
    |
    V

할부 원부
+----------------------+
| 할부ID               | PK
| 할부기간             | (1년/2년/3년)
| 수수료율             |
+----------------------+
```

### 테이블 정의

1. **고객기본정보 (CustomerBasicInfo)**
   - **고객번호** (PK)
   - **고객식별번호**
   - **고객명**
2. **계약기본정보 (ContractBaseInfo)**
   - **서비스계약번호** (PK)
   - **고객번호** (FK)
   - **시작일자**
   - **종료일자**
3. **기기변동이력 (DeviceChangeHistory)**
   - **서비스계약번호** (FK)
   - **기기일련번호** (FK)
   - **기기유형** (FK)
4. **기기 원부 (DeviceMaster)**
   - **일련번호** (PK)
   - **기기유형**
   - **출고가**
   - **판매가**
5. **서비스변동이력 (ServiceChangeHistory)**
   - **서비스계약번호** (FK)
   - **서비스유형** (FK)
6. **서비스 상품 기본 (ServiceProductBasic)**
   - **서비스유형** (PK)
   - **상품 유형** (요금제/부가서비스)
   - **월정액**
7. **단말기 할부 (DeviceInstallment)**
   - **할부ID** (PK)
   - **서비스계약번호** (FK)
   - **기기일련번호** (FK)
   - **할부금액**
   - **납부방식** (전액 즉시납부/전액 할부/부분 즉시납부+부분 할부)
   - **잔여금액**
   - **해지여부** (예/아니오)
8. **해지 내역 (TerminationDetails)**
   - **해지ID** (PK)
   - **서비스계약번호** (FK)
   - **해지일자**
   - **잔여금액**
   - **위약금**
9. **할부 원부 (InstallmentMaster)**
   - **할부ID** (PK)
   - **할부기간** (1년/2년/3년)
   - **수수료율** (5%/6%/7%)

이 설계는 단말기 할부 서비스와 관련된 모든 요구 사항을 충족하며, 구독형 모바일 요금제와 부가 서비스의 효율적인 관리를 지원합니다.